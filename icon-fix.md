# Задача: Проверка и исправление всех иконок в проекте

## Контекст
В проекте была выполнена миграция с системы MDI шрифтовых иконок на систему Iconify с CSS масками. Необходимо проверить, что все иконки корректно отображаются во всех компонентах и страницах.

## Система иконок
- **Старая система**: MDI шрифты (Material Design Icons как шрифт)
- **Новая система**: Iconify с CSS масками (иконки генерируются как CSS классы с SVG масками)
- **Расположение конфигурации**: `starter-kit/src/plugins/iconify/build-icons.ts`
- **Сгенерированный CSS**: `starter-kit/src/plugins/iconify/icons.css`

## Задачи для выполнения

### 1. Поиск всех использований иконок
Найти все места в коде где используются иконки:
- В компонентах Vue (`.vue` файлы)
- В TypeScript/JavaScript файлах
- Искать паттерны:
  - `icon="mdi-*"`
  - `icon: "mdi-*"`
  - `:icon="*"`
  - `class="mdi-*"`
  - Использование компонента `<VIcon>`

### 2. Проверка отображения иконок
Для каждой найденной иконки:
1. Запустить приложение (`pnpm dev` в директории `starter-kit`)
2. Открыть страницу где используется иконка
3. Проверить визуально что иконка отображается (не белый квадрат)
4. Проверить в инспекторе браузера:
   - Элемент имеет класс с именем иконки (например, `mdi-home`)
   - Применяется CSS маска (`mask-image` или `-webkit-mask-image`)
   - `background-color` установлен в `currentColor`

### 3. Исправление проблемных иконок
Если иконка не отображается (показывается белый квадрат):

1. **Проверить имя иконки**
   - Убедиться что используется правильное имя из Material Design Icons
   - Некоторые иконки могли измениться:
     - `mdi-account-tie` → `mdi-account-group`
     - `mdi-package` → `mdi-package-variant`
     - `mdi-calendar` → `mdi-calendar-clock`

2. **Добавить иконку в build-icons.ts**
   ```typescript
   icons: [
     'mdi:название-иконки',  // Добавить в этот массив
     // ...
   ]
   ```

3. **Пересобрать иконки**
   ```bash
   cd starter-kit
   pnpm build:icons
   ```

4. **Проверить CSS стили**
   - Файл `starter-kit/src/styles/iconify.scss` должен содержать правила для видимости иконок
   - Убедиться что стили подключены в `main.ts`

### 4. Особые случаи для проверки

#### Кнопки с иконками
- Кнопки "Редактировать" (обычно `mdi-pencil`)
- Кнопки "Удалить" (обычно `mdi-delete` или `mdi-trash-can`)
- Кнопки "Добавить" (обычно `mdi-plus`)
- Кнопки "Закрыть" (обычно `mdi-close`)
- Кнопки "Просмотр" (обычно `mdi-eye`)

#### Иконки в таблицах
- Иконки действий в последней колонке таблиц
- Иконки статусов
- Иконки сортировки

#### Иконки в формах
- Иконки в полях ввода (prepend/append icons)
- Иконки валидации (успех/ошибка)
- Иконки в селектах и выпадающих списках

#### Навигация
- Иконки в боковом меню (уже проверены и работают)
- Иконки в хлебных крошках
- Иконки в табах

### 5. Список страниц для обязательной проверки
- `/login` - страница входа
- `/home` - главная страница
- `/clients` - список клиентов
- `/clients/create` - создание клиента
- `/clients/[id]/edit` - редактирование клиента
- `/deals` - список сделок
- `/products` - список продуктов
- `/workers` - список сотрудников

### 6. Автоматизация проверки
Можно использовать Playwright для автоматической проверки:
```javascript
// Проверка что иконка имеет маску
const iconElement = await page.locator('.mdi-home').first();
const maskImage = await iconElement.evaluate(el =>
  window.getComputedStyle(el).maskImage ||
  window.getComputedStyle(el).webkitMaskImage
);
expect(maskImage).toContain('url');
```

## Ожидаемый результат
- Все иконки во всех компонентах должны корректно отображаться
- Не должно быть белых квадратов вместо иконок
- Все необходимые иконки должны быть добавлены в `build-icons.ts`
- Документировать все найденные и исправленные проблемы

## 7. Удаление старой системы иконок

### Удалить старые зависимости
Проверить и удалить из `package.json`:
```bash
# Удалить MDI шрифтовые пакеты
pnpm remove @mdi/font
pnpm remove @mdi/js
pnpm remove mdi-vue
pnpm remove vue-material-design-icons
```

### Удалить старые импорты
Найти и удалить импорты старых иконок:
- `import '@mdi/font/css/materialdesignicons.css'`
- `import * as mdiIcons from '@mdi/js'`
- Любые другие импорты связанные с MDI шрифтами

### Удалить старые стили
Проверить и удалить:
- CSS файлы с MDI шрифтами в `src/styles/` или `src/assets/`
- Ссылки на MDI CDN в `index.html`
- Старые SCSS переменные для MDI в файлах стилей

### Очистить старые файлы
- Удалить неиспользуемые файлы иконок в `src/assets/icons/` если есть
- Удалить старые компоненты-обертки для MDI иконок
- Проверить что нет дублирующихся систем иконок

### Проверить конфигурацию Vuetify
В файле `starter-kit/src/crudui/plugins/vuetify/icons.ts`:
- Убедиться что используется система Iconify
- Удалить любые ссылки на MDI шрифты
- Проверить что `defaultSet: 'iconify'`

### Финальная очистка
```bash
# Очистить кэш и пересобрать проект
cd starter-kit
rm -rf node_modules/.vite
pnpm install
pnpm build:icons
pnpm dev
```

## Примечания
- При добавлении новых иконок всегда запускать `pnpm build:icons`
- Проверять иконки в обоих темах (светлой и тёмной)
- Убедиться что иконки видны при наведении и в активном состоянии
- После удаления старых зависимостей обязательно протестировать весь функционал
- Сохранить список всех использованных иконок для документации